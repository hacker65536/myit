## 概要
AWSを導入する企業、AWSの利用を拡大する企業、または既存のAWS環境を強化する企業は、AWSのクラウド環境の基盤を確保する必要がある。その基盤として重要なのが、マルチアカウント戦略によるAWS環境の整理である。

複数のAWSアカウントを使用してビジネスアプリケーションとデータを分離して管理することで、運用の卓越性、セキュリティ、信頼性、コストの最適化など、AWS Well-Architected Frameworkの柱のほとんどにわたって最適化することができる。本稿では、AWS環境全体を整理するためのベストプラクティスと最新の推奨事項を紹介する。これらのベストプラクティスをどの程度使用するかは、クラウド導入の旅のステージと特定のビジネスニーズに依存する。

## あなたはWell-Architectedですか？
AWS Well-Architected Frameworkは、クラウド上でシステムを構築する際に行う決定の長所と短所を理解するのに役立ちます。フレームワークの6つの柱により、信頼性、安全性、効率性、コスト効率、持続可能性を備えたシステムを設計、運用するためのアーキテクチャーのベストプラクティスを学ぶことができます。AWS Management Consoleで無償提供されているAWS Well-Architected Toolを使用すると、各柱の一連の質問に答えることによって、これらのベストプラクティスに照らしてワークロードをレビューすることができます。

クラウドアーキテクチャのための専門家のガイダンスとベストプラクティス（アーキテクチャの展開、図、ホワイトペーパーを参照）については、AWS Architecture Centerを参照してください。

## マルチアカウント戦略のベストプラクティス＆レコメンデーション
AWS環境を整理するための最新のガイダンスを検討することは、企業にとって有益です。マルチアカウント戦略は、お客様がAWSの導入を開始するとき、AWSでのフットプリントを拡大するとき、または確立されたAWS環境の強化を計画するときに成功するための鍵になります。

お客様は、互いに分離する必要がある異なるセキュリティとコンプライアンス制御を持つ複数のチームを持っているかもしれません。また、ビジネスプロセスが全く異なる場合や、異なるビジネスラインに属している場合もあり、発生するコストを明確にする必要があります。

顧客は、明確なセキュリティ境界、限界とスロットリングの直接制御と可視性を持つメカニズム、およびコストを基本プロジェクトに直接マッピングするための課金分離を必要とする。AWSアカウントに設計された分離は、これらのニーズを満たすのに役立ちます。

複数のAWSアカウントを使用して、ビジネスアプリケーションとデータを分離して管理することで、運用の卓越性、セキュリティ、信頼性、コストの最適化など、AWS Well-Architected Frameworkの柱のほとんどにわたって最適化することができます。

## AWS accounts

お客様のクラウドリソースとデータは、AWSアカウントに含まれています。アカウントは、IDおよびアクセス管理の分離境界として機能します。2つのアカウント間でリソースやデータを共有する必要がある場合、このアクセスを明示的に許可する必要があります。

デフォルトでは、アカウント間のアクセスは許可されていません。たとえば、本番環境と非本番環境のリソースとデータを格納するために異なるアカウントを指定した場合、デフォルトではこれらの環境間でのアクセスは許可されません。

ニーズに合わせて最適なアカウントの数は、数個から数百個、あるいは数千個に及ぶこともある。多くのアカウントを管理するには、運用の複雑さを最小限に抑え、セキュリティ、ガバナンス、および運用要件との効率的な整合性を確保するために、自動化を使用する必要があります。AWSはアカウント単位で課金されることはありません。むしろ、アカウントの数量に関係なく、使用したリソースに基づいて料金が発生します。


## stages of adoption
AWSは、何千ものお客様との経験を通じて、クラウド導入の一般的なステージを概説しました。これらのベストプラクティスは、クラウド導入の旅を通して、お客様のニーズを満たすことができるように設計されています。小規模なAWS環境から始めて、経験を積み、採用を拡大しながら、徐々に環境を成長させ、進化させることができます。

AWSを初めて導入する場合、個人またはチームで管理するアカウントを1つ以上作成し、最初の実験を行うことから始めるかもしれません。この作業は通常インフォーマルに行われ、AWSの価値を評価するためのより協調的な取り組みが行われる前に行われます。この実験的で非公式な段階では、通常、アカウントの数と目的を整理し合理化するための投資はほとんど行われません。

### Stages of cloud adoption

クラウド導入のプロジェクト段階では、AWS上での最初の数回の本番導入のための正式な計画を開始します。一般的には、セキュリティ、ガバナンス、および運用の要件を満たす最初のクラウド基盤を確立します。

ワークロードは、ビジネス価値を一緒に提供するコンポーネントのセットを識別します。ワークロードは通常、ビジネスとテクノロジーのリーダーがやり取りするレベルである。ワークロードの例をいくつか挙げます。

- マーケティング用Webサイト
- Eコマースサイト
- モバイルアプリのバックエンド
- 分析プラットフォーム

ワークロードは、静的なウェブサイトから複雑なマイクロサービスまで、アーキテクチャの複雑さのレベルが異なり、それぞれコストや請求の識別に関する要件も異なる可能性があります。

1つのアカウントを使用するのではなく、複数のアカウントを使用してワークロードを分離することをお勧めします。このアプローチは、導入初期のプロジェクト段階でも、お客様の要件を満たしやすくするためのものです。その最初のいくつかのワークロードの成功に基づいて、AWSの採用を拡大することでさらなるビジネス利益を得たいと思うかもしれません。この動機は、しばしば採用の基礎段階へとつながります。この段階では、採用を大幅に拡大する前に、クラウドの基礎的な機能を進化させるために投資します。

AWSの基盤を進化させるには、より多くのチームやワークロードのオンボーディングのニーズを満たすために、アカウントの構造を正式なものにし、拡張することがよくある。この段階では、AWS環境を設計し、管理する準備をすることが重要であり、人員数を直線的に増加させることなく、ニーズに合わせて拡張することができます。大規模な移行を計画し、新しいクラウドネイティブワークロードを導入する際には、複数のアカウントを使用するアプローチを調整し強化し続けることができます。

クラウド導入のステージの詳細については、[AWS Cloud Transformation and Maturity Model](https://d1.awsstatic.com/whitepapers/AWS-Cloud-Transformation-Maturity-Model.pdf)を参照してください。


## Best practices

本書で紹介するベストプラクティスは、マルチアカウントによるセキュリティ、ガバナンス、運用の要件をより簡単に実現できるように設計されています。ベストプラクティスは、クラウド導入の旅を進めてきた何千ものお客様の経験に基づいて作成されました。

ベストプラクティスは、AWS環境の最初の適切なサイズの範囲を迅速に確立し、AWSサービスやAWSクラウドとの連携方法の両方を経験しながらAWS環境を調整、拡張するのに役立つ。

このベストプラクティスは、他の組織のニーズと類似しているが、各組織には独自の要件もある。したがって、これらのベストプラクティスは、AWS環境を構成するための画一的な解決策ではなく、ガイダンスを提供することを意図している。そのため、AWS環境の設計は、このドキュメントで提供される例とは異なる可能性がある。しかし、これらのベストプラクティスは、環境を設計する際に、情報に基づいた決定を下すのに役立つ。


## Relation to AWS Well-Architected

AWS Well-Architectedは、クラウドアーキテクトがアプリケーションやワークロードのために安全で高性能、弾力的で効率的なインフラを構築することを支援します。AWS Well-Architectedは、6つの柱（運用性、セキュリティ、信頼性、パフォーマンス効率、コスト最適化、持続可能性）に基づいて、お客様とパートナーがアーキテクチャを評価し、長期的に拡張可能な設計を実装するための一貫したアプローチを提供します。

本ガイドで扱うAWS環境構築のベストプラクティスは、Well-Architectedの柱で表されるベストプラクティスを補強、サポートするものです。

AWS環境の構築方法に関連するWell-Architectedフレームワークの詳細なリストについては、「[付録A: AWS Well-Architectedとの関連性](https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/appendix-a-relation-to-aws-well-architected.html)」を参照してください。

## Intended audience
これらのベストプラクティスは、AWS環境の全体的なセキュリティとアーキテクチャに責任を持つクラウドアーキテクトとテクニカルリードに向けられている。AWSを使い始めたばかりでも、何年も使っていても、これらのベストプラクティスをレビューし、要件や現在のAWS環境と比較することで、あなたのチームは利益を得ることができる。

これらのベストプラクティスは、業界、規模、AWSを採用する予定規模、ワークロードのポートフォリオに大きく依存しない組織に適用することを意図している。ニーズによっては、すべてのベストプラクティスがあなたの状況に当てはまるとは限りません。

もしあなたが、単一のAWSアカウントを使用してAWSについて実験し、学び始めたばかりなら、最初のいくつかの本番ワークロードの計画を始めるまで、これらのベストプラクティスを考慮する必要はありません。


## Benefits of using multiple AWS accounts

AWSを導入する際には、ビジネス、ガバナンス、セキュリティ、運用の各要件をAWSでどのように満たすことができるかを判断することをお勧めします。複数のAWSアカウントを使用することは、これらの要件を満たす方法として重要な役割を果たします。

複数のアカウントを使用することで、次のセクションで説明するようなメリットを実現することができます。

トピックス

- ビジネス目的と所有権に基づくワークロードのグループ化
- 環境ごとに異なるセキュリティ制御を適用する
- 機密データへのアクセスを制限する
- イノベーションとアジリティの推進
- 有害事象の影響範囲を限定する
- 複数のITオペレーティング・モデルのサポート
- コスト管理
- AWSサービスクォータとAPIリクエストレート制限の配布


## Group workloads based on business purpose and ownership
共通のビジネス目的を持つワークロードを、個別のアカウントにグループ化することができます。その結果、所有権と意思決定をこれらのアカウントに合わせることができ、他のアカウントのワークロードのセキュリティと管理方法との依存関係や競合を回避することができます。

ビジネスユニットや製品チームが異なれば、プロセスも異なるかもしれません。ビジネスモデルによっては、異なるビジネスユニットや子会社を別のアカウントに分離することもできます。ビジネスユニットを分離することで、より分散された管理が可能になり、かつ、包括的なガードレールを提供することができるようになります。また、この方法であれば、時間の経過とともに事業部門を切り離すことも容易になります。

ガードレールとは、セキュリティ、運用、コンプライアンスに関するガバナンスルールのことで、全体的な要件と一致しない場合に定義して適用することができる。

すでにAWSで運用されているビジネスを買収した場合、関連するアカウントをそのまま既存の組織に移動させることができる。このアカウントの移動は、買収したサービスを標準的なアカウント構造に統合するための最初のステップになることがあります。

## Apply distinct security controls by environment
ワークロードは、多くの場合、個別のセキュリティプロファイルを持ち、それをサポートするために個別の制御ポリシーとメカニズムが必要です。例えば、あるワークロードの非生産環境と生産環境に対して、異なるセキュリティおよび運用ポリシーを適用することはよくあることです。非生産環境と生産環境に別々のアカウントを使用することで、デフォルトでは、ワークロード環境を構成するリソースとデータは、他の環境とワークロードから分離されます。

## Constrain access to sensitive data
機密データストアを管理するために構築されたアカウントに限定すると、データストアにアクセスし管理できる人やプロセスの数をより簡単に制限することができます。この方法は、最小権限アクセスを実現するためのプロセスを簡素化します。アカウントの粗いレベルでアクセスを制限すると、機密性の高いデータへのアクセスを抑制することができます。

たとえば、一般にアクセス可能なAmazon S3バケットを格納するアカウントセットを指定すると、他のすべてのアカウントにS3バケットの一般公開を明示的に禁止するポリシーを実装することが可能になります。

## Promote innovation and agility
AWSでは、お客様の技術者をビルダーと呼んでいます。なぜなら、彼らは皆、AWSの製品とサービスを使って価値を構築する責任を負っているからです。構築者は、アプリケーション開発者、データエンジニア、データサイエンティスト、データアナリスト、セキュリティエンジニア、インフラエンジニアなど、さまざまな役割を担っている可能性があります。

ワークロードのライフサイクルの初期段階では、実験、開発、および初期テストをサポートするために、構築者に個別のアカウントを提供することによって、イノベーションを促進することができます。これらの環境は、機密データや内部データへのアクセスや使用を禁止するためのガードレールを使用しながら、AWSサービスへの幅広いアクセスを可能にすることで、より厳しく管理された本番環境のようなテストや本番環境よりも大きな自由度を提供することがよくあります。

サンドボックスアカウントは、一般的にエンタープライズサービスから切り離され、内部データへのアクセスを提供しませんが、実験のための最大の自由を提供します。

開発アカウントは、一般的にエンタープライズサービスや開発データへのアクセスが制限されますが、エンタープライズで承認されたAWSサービスでの日々の実験、正式な開発、初期のテスト作業をより容易にサポートすることができます。

どちらの場合も、リスクを制限し、積極的にコストを管理するために、セキュリティガードレールとコストバジェットを推奨します。

ワークロードのライフサイクルの後期をサポートするために、ワークロードまたは関連するワークロードのグループに対して、個別のテストアカウントと本番アカウントを使用することができます。ワークロードのセットごとに環境を用意することで、他のチームやワークロードへの依存を減らし、変更の影響を最小限に抑えることができるため、所有チームはより迅速に作業を進めることができる。

## Limit scope of impact from adverse events
AWSアカウントは、AWSリソースのセキュリティ、アクセス、および課金境界を提供し、リソースの独立性と分離を達成するのに役立ちます。設計上、アカウント内でプロビジョニングされたすべてのリソースは、お客様自身のAWS環境内であっても、他のアカウントでプロビジョニングされたリソースから論理的に分離されています。

この分離境界は、アプリケーション関連の問題、誤設定、または悪意のある行為のリスクを制限する方法を提供します。あるアカウントで問題が発生した場合、他のアカウントに含まれるワークロードへの影響を低減または排除することができる。


## Support multiple IT operating models

組織には、複数の IT オペレーティング・モデル、つまりアプリケーション・ワークロードとプラットフォーム機能を提供するために組織内の各部門に責任を分担させる方法が存在することがよくあります。次の図は、3つのオペレーティングモデルの例を示しています。


運用モデルの例

従来の運用モデルでは、カスタムおよび商用オフザシェルフ（COTS）アプリケーションを所有するチームが、アプリケーションのエンジニアリングに責任を持ちますが、本番運用には責任を持ちません。クラウドプラットフォームエンジニアリングチームは、基盤となるプラットフォーム機能のエンジニアリングに責任を負います。アプリケーションとプラットフォームの両方の運用を担当するのは、別のクラウド運用チームです。

CloudOpsモデルでは、アプリケーション・チームは、アプリケーションの本番運用にも責任を持ちます。このモデルでは、共通のクラウドプラットフォームエンジニアリングチームが、基盤となるプラットフォーム機能のエンジニアリングと運用の両方に責任を負います。

DevOpsモデルでは、アプリケーション・チームは、アプリケーションに特化したプラットフォーム機能のエンジニアリングと運用の責任を追加で担います。クラウドプラットフォームエンジニアリングチームは、複数のアプリケーションで使用される共有プラットフォーム機能のエンジニアリングと運用に責任を負います。

プラクティスとして、ITサービスマネジメント（ITSM）は、すべてのモデルに共通する要素です。ITSM の全体的な目標や要件はこれらのモデル間で変わらないかもしれませんが、これらの目標や要件を満たすための責任者やソリューションは、モデルによって異なる可能性があります。

集中型運用と分散型運用を考慮すると、異なる運用モデルをサポートするために、別々のアカウント・グループを確立することが有益であると思われます。別々のアカウントを使用することで、各オペレーティング・モデルに適した、個別のガバナンスと運用管理を適用することができます。

運用モデルとそれがクラウド導入に与える影響について詳しくは、[AWS Well-Architected Operational Excellence Pillar Operating Model](https://docs.aws.amazon.com/wellarchitected/latest/operational-excellence-pillar/operating-model.html)を参照してください。

## Manage costs
アカウントは、AWSのコストを割り当てるためのデフォルトの手段である。このため、ビジネスユニットやワークロードのグループごとに異なるアカウントを使用すると、クラウドの支出をより簡単に報告、管理、予測、予算化することができます。

アカウントレベルでのコスト報告に加えて、AWSはアカウントセット全体のコストを統合して報告するためのサポートを内蔵している。きめ細かいコスト配分が必要な場合は、各アカウントの個々のリソースにコスト配分タグを適用することができます。

コスト最適化の詳細については、[AWS Well-Architected Cost Optimization PillarのExpenditure and Usage Awareness](https://docs.aws.amazon.com/wellarchitected/latest/cost-optimization-pillar/expenditure-and-usage-awareness.html)のベストプラクティスを参照してください。

## Distribute AWS Service Quotas and API request rate limits


AWS Service Quotasは、リミットとも呼ばれ、アカウントに適用されるサービスリソースまたは操作の最大数です。例えば、各アカウントで作成できるAmazon Simple Storage Service (Amazon S3)のバケット数などです。

サービスクオータを使用すると、AWSリソースの予期せぬ過剰なプロビジョニングや、AWSコストに大きな影響を与える悪意のある行為から保護するのに役立ちます。

また、AWSサービスは、そのAPI操作に対して行われるリクエストのレートをスロットルまたは制限することができます。

サービスクォータとリクエストレートの制限はアカウントごとに割り当てられるため、ワークロードに別々のアカウントを使用することで、クォータと制限の潜在的な影響を分散させることができます。

サービスクォータの管理について詳しくは、「[AWS Well-Architected Reliability Pillar Manage Service Quotas and Constraints](https://docs.aws.amazon.com/wellarchitected/latest/reliability-pillar/manage-service-quotas-and-constraints.html)」を参照してください。


## AWS Organizations
AWS Organizationsサービスは、AWS上でワークロードを拡大・拡張する際に、環境を一元的に管理することを支援します。成長中の新興企業でも大企業でも、Organizationsを使用すると、アカウントとリソースの集中的なプロビジョニング、コンプライアンスに向けた環境の保護と監査、リソースの共有、アカウント、地域、サービスへのアクセスの制御、さらにコストの最適化と請求の簡素化を行うことができます。さらに、Organizations は、ヘルスイベントの集約、アクセス許可の使用に関するデータの統合、マルチアカウント環境でのバックアップとタグ付けの集中管理をサポートします。

このセクションでは、AWS環境全体をより効果的に保護および管理できるように、アカウントを組織単位（OU）にグループ化するなど、AWSアカウントを組織化するためのベストプラクティスを紹介します。

### 組織とは何ですか？
組織は、あなたが単一の単位としてそれらを管理できるように、アカウントのコレクションを統合するために作成するエンティティです。各組織内では、ルートを頂点とし、その下に組織単位（OU）をネストさせた階層的なツリー構造でアカウントを整理することができる。各アカウントは、ルートに直接配置するか、または階層内のOUのいずれかに配置することができます。

各組織は、で構成されています。 


- 管理アカウント
- ゼロまたは複数のメンバーアカウント
- ゼロまたはそれ以上の組織単位（OUs）
- ゼロまたは複数のポリシー

### 組織の管理アカウント
管理アカウントは、AWS組織のリソース、OU、およびポリシーを作成し、組織のメンバーアカウントを管理する。管理アカウントへのアクセスは、実行する必要がある活動に基づいて最小特権の原則に従い、組織から高度に信頼された少数の個人によって厳密に制御される必要があります。このアカウントは、ワークロードには使用されず、一般に、顧客のリソースを含んではならない。

さらに、組織管理アカウントは、組織内のアカウント間でガードレールまたは他の標準化されたインフラストラクチャ構造の一貫した展開を自動化するための自動化ツールがインストールされる場所である。自動化ツールで使用される信頼関係は、組織内の子AWSアカウントと組織管理アカウントとの間に存在する。この関係は、組織で新しいAWSアカウントが作成されたときにデフォルトで確立され、管理アカウントのユーザーとロールが子アカウントでこのクロスアカウントAWS Identity and Access Management（IAM）ロールを引き受けることができるようにするものである。

#### 管理アカウントを設定する際の注意点

ほとんどのお客様は、AWS上にワークロードを展開する前に、いくつかの概念実証（PoC）を構築する1つのAWSアカウントで開始します。このような状況では、管理アカウントとして新しいAWSアカウントを作成し、既存のアカウントを新しいAWS組織に招待することをお勧めします。これにより、そのアカウントに既にある可能性のあるPoCやワークロードをそのまま維持することができます。

管理アカウントをセットアップするとき、私たちは、唯一の個人がこのメールアドレスにアクセスする場合、例えば、彼らがあなたの組織を離れるか、アカウントへのアクセスを失うことを避けるために、共有メールボックスに属しているメールアドレスを使用することをお勧めします。

### Organizationsのメンバーアカウント
AWS Organizationsのメンバーアカウントは、組織に属し、組織全体の仕組みの中に存在する。メンバーアカウントに対するすべての請求は、組織の管理アカウントに集約されます。

ワークロードのほとんどはメンバーアカウントに存在するが、一部の集中管理されたプロセスは、管理アカウントか、特定のAWSサービスの指定管理者として割り当てられたアカウントに存在する必要がある。

### 組織単位
組織単位（OU）は、ルート内のアカウントをグループ化する手段を提供します。OUは、他のOUを含むことができます。階層構造のノードの1つにポリシーをアタッチすると、ポリシーは下に流れ、その下のすべてのブランチ（OU）とリーフ（アカウント）に影響を与えます。OUは正確に1つの親を持つことができ、各アカウントは正確に1つのOUのメンバーになることができます。

OUは、組織のレポート構造を反映するためのものではありません。その代わり、OUは共通の包括的なセキュリティポリシーと運用上のニーズを持つアカウントをグループ化することを意図している。自問自答すべき主要な質問は、「グループが一連の類似したポリシーを必要とする可能性はどの程度あるか」です。

次の図は、7つのアカウントで構成される基本的な組織を示しており、それらはルートの下の4つのOUに編成されています。また、この組織には、OUに適用されるポリシーがいくつかあります。
<img width="794" alt="image" src="https://user-images.githubusercontent.com/2577368/198515820-f62342f6-0308-442d-909a-7a56c7fa2386.png">
